<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:pe="http://primefaces.org/ui/extensions">

<h:head>
    <title>Login</title>
    <h:outputStylesheet name="/css/mycss.css" />
</h:head>

<h:body>

    <h:form prependId="false">

        <p:panelGrid columns="1" styleClass="ui-fluid center ui-noborder">
            <h2 style="color: #90c030; text-align: center;">PLEASE LOGIN</h2>

            <p:outputLabel value="Login failed!" styleClass="red"
                           rendered="${!empty param['error']}" />

            <p:inputText id="username" placeholder="User name" />
            <p:password id="password" placeholder="Password" />

            <p:commandButton value="Login" ajax="false" />

            <p:button href="/login/facebook" value="Log In With Facebook"/>
<!--            <div class="container"></div>-->
<!--            <div class="container unauthenticated">-->
<!--                <a href="/login/facebook">Log In With Facebook</a>-->

<!--            </div>-->
<!--            <div class="container authenticated" style="display:none">-->
<!--                Logged in as: <span id="user"></span>-->
<!--            </div>-->
            <script type="text/javascript">
                $.get("/user", function(data) {
                    $("#user").html(data.userAuthentication.details.name);
                    $(".unauthenticated").hide()
                    $(".authenticated").show()

                    <!-- this is not very nice, try to do it properly -->
                    window.location.replace("http://localhost:8080/helloworld.xhtml");
                });
            </script>


        </p:panelGrid>

    </h:form>
</h:body>
</html>